Omerta is a platform for ephemeral compute swarms which allows providers to share their compute without worrying about what is being run. It does this by deleting VMs after use and requiring all networking traffic go through a VPN served by the compute consumer. This decreases risks of providing compute in a swarm without requiring heavyweight mechanisms for encrypted computation or identity attestation. This will hopefully allow wider access to compute swarms both for providers and consumers and subsequently decrease underutilization of our global compute resources.

While there are still legitimate security concerns like VM escapes and malicious providers. We argue that a coming requirement for a more proactive approach to computer security as well as the erosion of intellectual property rights as a result of machine intelligence will tip the scales firmly in our favor. Membership in an Omerta network provides, in addition to potential monetary compensation, a shephard for that user's compute resources which can keep the newly born wolves at bay.

- starts a new VM for every compute request which gets deleted when its done
- routes all traffic through VPN served by requester
- allows filtering and prioritizing sources of requests
- allows requiring requests include a description of their activity which you can log
- always monitors for rogue internet connections
- option to aggressively prioritize user tasks over other work
- support for checkpoint and restart of VMs

TODOs
CORE
- work through plan for tunnel between provider and consumer
- fix IPv6 NAT detection and add contact request message for NAT hole punching that uses relay only for initial message
- make sure keepalive to bootstrap nodes is working correctly
- finish working through manual tests
  - make sure we handle a diverse set of cases where inbound traffic isn't allowed for both IPv4 and IPv6
  - make sure we are testing relay functionality with artificial constraints on peer nodes
- separate out OmertaMesh into its own repo and establish API
- separate out blockchain protocol and docs and research docs into their own repo
- implement compute capability and utilization monitoring
- standardize process for adding networks to bootstrap nodes
  - lock down other unnecessary omerta functionality
  - add config options for disabling things that a popular target mesh node would want to protect against that could DOS the rest of the network
- get usermode consumer working on linux and mac
- implement mac gui
  - measure and limit VM energy consumption, use lower power CPU states where useful
  - try to predict whether user has bandwidth consumption constraints and use for VM request routing
  - measure aggregate bandwidth consumption and warn if it is getting high
  - automatically disable sleep while plugged in
  - automate killing or migration of VMs when user is at keyboard
  - visualize network and communication between mesh nodes
- compare with other protocols that support sessions like TCP and see if we are missing anything
- look for anything that can DOS the system or participants
  - review usage of broadcast and announcement methods
  - add reasonable rate limiting to UDP socket wrapper

ENHANCEMENTS
- have VM join mesh and incorporate into proof of availability
  - gossip system stats, performance counters, and microbenchmark results constantly so they can be monitored, per-peer stats profiles can be compared for similar machines, cycle metrics so it's difficult to fake statistical similarity and has dependence on unknown uarch parameters
    - goal is to make it so that the cost of faking is accurately simulating the hardware you were supposed to be running anyways
  - use consumer peer node as relay and exit node, firewall rules on provider guarantee this
- implement mosh clone ssh client for use with mesh tunnel
- implement VPN functionality using the Tunnel utility for internet connections and the mesh for LAN connections
  - support ssh over mesh with our custom ssh client
    - add support to client for targeting generic interfaces
- add support for assigning a network interface to VMs when consumer runs with elevated privileges
- implement kernel accelerated, DPU accelerated, and FPGA accelerated mesh nodes
- look for common traffic analysis attacks and add padding to reduce data leakage
- add support for prioritizing VM requests by network
- implement multi-interface prioritization support for control plane
- have commands assume network and peer is one from running omertad if there is only one
- review code
- implement and test wireguard connection migration
- use generic send for relay forwarding instead of socket send so we can recursively try to get a packet to its destination

COMPUTE ECONOMY
- make sure machines have some kind of fingerprint so that colluding consumer+producer pairs can't respond to verification requests with standby hot spares for fake machines
- review autogenerated docs for transaction 00 and 01
- run agent-based simulations trying to break 00 and 01
- walk through some small examples with the formal language spec to understand it better and debug
- make sure all the mechanisms in the protocol can be updated with user consensus
- make sure there are ways for humans to give unexplained assertions in a way that can increase network health
- try designing math such that any sized participant will give up at least 10% of their compute-normalized income to verified humans
- come up with plan for intermittent remote backups of local chains to handle cases where users go offline permanently.
  - consider having attestations on local chains which are final enough that you never check the local chain before that point again

PAPER
- explain how a classroom of laptops equals an H100
  - similar in price, classroom has better bw/$ and flops/$ (?)
  - easily controllable with omerta plus AI
  - good for important embarassingly parallel workloads like AI inference
  - possibly will also work for more workloads with developer effort like MoE
    - could include a base station locally for less parallelizable portions
- describe blockchain consistency models and what we mean by eventual consistency
  - explain what kind of guarantees we can provide and how they relate to other works
- add discussion of how same isolation is required for both untrusted humans and for AI that makes unpredictable mistakes
  - talk about how we need another environment kind of like containers where LLMs have freedom to work without breaking anything and where startup and teardown costs are minimal to both the human and machine
  - talk about how the collection of ephemeral compute exists as a stable medium from the perspective of a machine that can move between the nodes at practically zero cost, it seems like it would be difficult to use because humans would have a hard time, but it will enable humans to do new things while the machines manage the new layer and achieve greater efficiency that we can today
  - compute as a public good or utility, tie in with UBI message for abstract
  - discuss how security issues might make this inevitable one way or another anyways, we try to pre-empt that and give machines an interface to manage the security and allocation amongst themselves with visibility for us
- add new sections on protocol specification and simulation methodology
- write up maximum potential for wealth redistribution through Omerta
- plan mechanism for machine assisted identity verification
  - use automated detection, search for super-predictor humans that do the same or better as heaviest models
- add simulations for incumbants trying to take over network
- discuss future (as an extension of trends in the present) dominated by an increasingly small number of machine assisted humans with limited visibility into details and implications for inequality and economies
- do more programmatic literature search that creates a list of claims and looks for related work on each 

SOCIAL NETWORK BOOTSTRAPPING
- add a demo mode to omertad that only allows short small VM leases to guarantee availability 
- implement SSO and identity management
- add user warnings about threat model to onboarding with links to more detailed documentation
- add statistics tracking and querying support to mesh nodes, provide link to explain what is done with data and corresponding dashboards, attack and mitigation demos
- create app and standalone device with bootstrapping/disaster recovery mode that onboards people through a captive portal on an open SSID

VPN and MESH HARDENING
- continue work on tests with simulated networks, find a way to simulate large networks
- write macos, ios, and linux VPN client and linux server apps that share network with omertad
  - add paranoid mode to OmertaMesh that requires all traffic go through wireguard to a home server as the exit point
- add multi-radio support and connection prioritization
  - add support for traffic shaping and bandwidth splitting
  - add support for a lora iPhone case

MACHINE ASSISTED MONITORING
- add support for explicitly exposing access to guest from host so isolation can't be assumed
- add a feature or separate tool for LLM assisted spot checking of shared compute and credit assignment
  - possibly use a blockchain for maintaining history as well as assigning coins based on contributions
- have option for more detailed machine intelligence assisted observation of VM by host provider
  - allows creation of a mechanism for trust and ranking of users
  - allows maintenance of free networks for good causes as decided by the provider
  - might need to be run and maintain by dedicated, more tech-savy participants who understand false positives

Automated review prompt
The automated reviewer should asking the following questions: How is this work novel compared to previous work in
  the field or similar fields? What are the weakest contributions, and what makes them so weak? What additional simulation work should be done to make this work more relevant and robust? What
  citations are missing, and how do they factor into the key points and simulation results? What logical jumps are there in the paper that make up the weakest links in the chain, and how can they
  be strengthened? What existing work is not receiving the credit it is due, and how is that bias influencing the writing or results? What are the methodological flaws in the simulations, missing
  parameters or unrealistic assumptions, and how should they be addressed? How are the mathematical models lacking in rigor, and what should be done to improve them in general or in relation to
  previous work? What kind of mathematical proofs or assertions that are otherwise provable in simulation or with empirical data are missing that would strengthen the work or hurt the key points?
  What empirical data contradicts the key points of the work and how are those contradictions addressed? 

  What ideas in the paper are not completely clear? What sections or sentences seem overly verbose relative to the points they are getting across and value to the paper? What content is being repeated that shouldn't be and what points aren't being repeated that deserve more emphasis? What structural changes could improve readability and the probability of readers continuing to read after they start? Do the sections and subsections properly flow into each other in a way that is not too abrupt? What hooks or punchy lines would best get your main points across and where should you add them? What figures or tables could be addded that would be most valuable for demonstrating the core ideas of the paper?

Please save the reviews somewhere in case we want to revisit them. Respond to the reviews with a separate review response file before making changes directly to the text. While addressing the reviews, if there are any changes or decisions you aren't completely sure about, please include those concerns in the review response so I can review those with you later. While creating your response, please fetch all works referenced, verify the reviewers claims, and ask the same questsions asked of the reviewer to yourself. 

Increase thoroughness of literature and related work search. Please present the questions in a way where the reviewer does not know what reviews have already taken place.

Walk citation graphs for most relevant works in reviews and in base work. Use Google Scholar for walking citations.

If you can't find the PDF of a work online, remove it from the citations. Add it to an appendix of works that you think should be cited but you don't have access to. Add a bit of detail on what impact it would have on the work. See if you can find another format of the work, reporting on the work, or derivative work to replace the paper that is open instead.


I was just thinking about the protocol for updating the oldest date a peer existed in the network. There would be some scenario where someone told you that they or someone else was older than you thought. Then you would have to ask around. There are a couple avenues for misconduct in that sequence. One is that the peer lied about their age. The other is that a peer is ignoring too many requests for help with verfiication. In both cases, you need some formalized process of generating an accusation and a formalized trial process that checks which claim is more consistent with the network state. This is a more general description of what we are already doing with compute verification failures. The failure can be thought of separately. Instead of a cabal taking a vote, it is a cabal watching passively and stewarding the transaction. In the case of a failed check, an accusation is triggered and then a subsequent trial which may or may not include only cabal members. 


Protocol for recording VM rentals on chain is
- consumer makes request
- provider agrees and starts gathering witnesses
- once witnesses are gathered, local trust levels of consumer and provider relative to each other are verified
- witnesses compute burn rate for payment
- initial deposit from consumer is made to virtual escrow
- provider allocates VM
- provider tells witnesses when VM is allocated and connected to consumer and witness wireguards
- witnesses verify the VM connection, are able to vote to end transaction and return deposit here
- provider is allowed to accuse consumer of misuse and call for trial where others observe connection to consumer from inside VM, i.e., ssh over wireguard
- further use beyond what is secured by the deposit must be paid for in advance by securing more payment with witnesses, otherwise provider kills the VM
- provider tells witnesses when VM was cancelled which may have been done by either party or by a fault
- witnesses return any unused funds to consumer and deliver payment to provider

