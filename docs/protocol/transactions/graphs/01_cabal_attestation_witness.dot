digraph {
    rankdir=TB;
    node [shape=box, style=rounded];
    edge [fontsize=10];

    __start__ [shape=point, width=0.2];
    __start__ -> AWAITING_ALLOCATION;

    DONE [shape=box, style="rounded,bold"];

    AWAITING_ALLOCATION -> AWAITING_ALLOCATION [label="setup_session"];
    AWAITING_ALLOCATION -> VERIFYING_VM [label="VM_ALLOCATED"];
    VERIFYING_VM -> COLLECTING_VOTES [label="auto"];
    COLLECTING_VOTES -> COLLECTING_VOTES [label="VM_CONNECTIVITY_VOTE\n[message.payload.witness !...]"];
    COLLECTING_VOTES -> EVALUATING_CONNECTIVITY [label="auto\n[LENGTH (connectivity_vote...]"];
    COLLECTING_VOTES -> EVALUATING_CONNECTIVITY [label="timeout(CONNECTIVITY_VOTE_TIMEOUT)"];
    EVALUATING_CONNECTIVITY -> MONITORING [label="auto\n[LENGTH (connectivity_vote...]"];
    EVALUATING_CONNECTIVITY -> VOTING_ABORT [label="auto\n[LENGTH (connectivity_vote...]"];
    MONITORING -> ATTESTING [label="VM_CANCELLED"];
    MONITORING -> HANDLING_MISUSE [label="MISUSE_ACCUSATION"];
    HANDLING_MISUSE -> VOTING_ABORT [label="auto\n[LOAD (misuse_accusation)....]"];
    HANDLING_MISUSE -> MONITORING [label="auto\n[LOAD (misuse_accusation)....]"];
    VOTING_ABORT -> COLLECTING_ABORT_VOTES [label="auto"];
    COLLECTING_ABORT_VOTES -> COLLECTING_ABORT_VOTES [label="ABORT_VOTE\n[message.payload.witness !...]"];
    COLLECTING_ABORT_VOTES -> ATTESTING [label="auto\n[LENGTH (abort_votes) / (L...]"];
    COLLECTING_ABORT_VOTES -> MONITORING [label="timeout(ABORT_VOTE_TIMEOUT)\n[LENGTH (abort_votes) / (L...]"];
    COLLECTING_ABORT_VOTES -> ATTESTING [label="timeout(ABORT_VOTE_TIMEOUT)\n[LENGTH (abort_votes) / (L...]"];
    ATTESTING -> COLLECTING_ATTESTATION_SIGS [label="auto"];
    COLLECTING_ATTESTATION_SIGS -> COLLECTING_ATTESTATION_SIGS [label="ATTESTATION_SHARE"];
    COLLECTING_ATTESTATION_SIGS -> PROPAGATING_ATTESTATION [label="auto\n[LENGTH (attestation_signa...]"];
    PROPAGATING_ATTESTATION -> DONE [label="auto"];
}